<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Precificador de CrochÃª â€” Frontend</title>
  <link rel="stylesheet" href="css/home.css">
  <style>
    /* iframe fade transition */
    #app-frame{ transition: opacity 260ms ease; opacity:1; }
    #app-frame.fading{ opacity:0; }
    /* subtle focus for active nav button */
    nav .btn { transition: background-color .18s ease, transform .12s ease; }
    nav .btn:hover{ transform: translateY(-2px); }
    /* mobile adjustments */
    @media(max-width:767px){
      body { padding: 0.5rem; }
      .text-4xl { font-size: 1.75rem; }
      .emoji { font-size: 2rem; }
      nav .btn { padding: 0.75rem 1rem; font-size: 1rem; }
      .mb-8 { margin-bottom: 1rem; }
      .text-sm { font-size: 0.8rem; }
    }
  </style>
  <!-- Configure sua API aqui (mude para a URL do backend em produÃ§Ã£o) -->
  <script>
    window.API_BASE = 'http://127.0.0.1:8000'; // altere para sua API pÃºblica
  </script>
</head>
<body class="bg-crochet min-h-screen flex items-center justify-center p-6">

  <div style="width:100%;max-width:1100px;">
    <header class="text-center mb-8">
      <h1 class="text-4xl font-extrabold text-crochet-dark mb-2"><span class="emoji">ðŸ§¶</span> Precificador CrochÃª</h1>
      <p class="text-sm text-gray-500">VersÃ£o estÃ¡tica para GitHub Pages â€” navegue pelas pÃ¡ginas abaixo</p>
    </header>

    <nav style="display:flex;gap:.5rem;justify-content:center;margin-bottom:1rem;">
      <button class="btn btn-primary" onclick="navigate('./home.html', this)">PÃ¡gina Inicial</button>
      <button class="btn" onclick="navigate('./calculator.html', this)">Calculadora</button>
      <button class="btn" onclick="navigate('./notes.html', this)">Minhas Notas</button>
      <button class="btn" onclick="navigate('./login.html', this)">Login</button>
      <button class="btn" onclick="navigate('./register.html', this)">Registar</button>
    </nav>

    <div style="height:calc(100vh - 220px); border-radius:8px; overflow:hidden; background:white; box-shadow:0 10px 30px rgba(15,23,42,0.06);">
      <iframe id="app-frame" src="./home.html" style="width:100%;height:100%;border:0;background:white;"></iframe>
    </div>

    <footer class="footer text-center" style="margin-top:.75rem;">&copy; <span id="year"></span> Precificador de CrochÃª</footer>
  </div>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    function setActive(button){
      const btns = document.querySelectorAll('nav .btn');
      btns.forEach(b=> b.classList.remove('btn-primary'));
      if(button && button.classList) button.classList.add('btn-primary');
    }

    function navigate(page, button){
      // ensure relative path for local static hosting
      const p = page.startsWith('./') ? page : ('./' + page.replace(/^\/+/, ''));
      const iframe = document.getElementById('app-frame');
      // mark active button immediately
      setActive(button);
      // animate fade out, change src, fade in on load
      iframe.classList.add('fading');
      // small timeout to allow CSS transition
      setTimeout(()=>{
        iframe.src = p;
      }, 200);
      // update hash for deep-link (store without leading ./)
      location.hash = p.replace('./','');
      iframe.onload = ()=>{ iframe.classList.remove('fading'); };
    }

    // Load from hash on open and set active button
    (function(){
      const raw = location.hash && location.hash.length>1 ? location.hash.slice(1) : 'home.html';
      const target = raw.startsWith('./') ? raw : './' + raw.replace(/^\/+/, '');
      document.getElementById('app-frame').src = target;
      // find matching nav button and set active
      const btns = document.querySelectorAll('nav .btn');
      for(const b of btns){
        const onclick = b.getAttribute('onclick') || '';
        if(onclick.includes(target.replace('./',''))){ setActive(b); break; }
      }
    })();
  </script>
</body>
</html>
